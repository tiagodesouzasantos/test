angular.module("rotasAngularJs",["ngMaterial","ngAnimate","ngSanitize","ui.router","gridster","ui.carousel","chart.js","home","menu","initial","rzModule","dbServer","mapsService","timeService","materialCalendar","treinamento","text"]).config(["$mdThemingProvider","$stateProvider","$urlRouterProvider","$mdDateLocaleProvider",function(e,o,t,n){e.theme("default").primaryPalette("light-blue").accentPalette("light-blue"),o.state("initial",{url:"/initial",views:{"content@":{templateUrl:"modules/initial/index.html",controller:"initialController"}}}).state("menu",{abstract:!0,views:{"content@":{templateUrl:"modules/menu/index.html",controller:"menuController as menu"}}}).state("home",{parent:"menu",url:"/home",views:{"main@menu":{templateUrl:"modules/home/index.html",controller:"homeController as home"}}}).state("treinamento",{parent:"menu",url:"/treinamento",params:{treinamento:null},views:{"main@menu":{templateUrl:"modules/treinamento/index.html",controller:"treinamentoController as treinamento"}}}),t.otherwise("initial"),n.formatDate=function(e){return void 0===e?"":moment(e).format("DD/MM/YYYY")},n.parseDate=function(e){var o=moment(e,"DD/MM/YYYY",!0);return o.isValid()?o.toDate():new Date(NaN)},n.months=["janeiro","fereveiro","março","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"],n.shortMonths=["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],n.shortDays=["Dom","Seg","Ter","Qua","Qui","Sex","Sab"]}]).run(["$rootScope","$state","session",function(e,o,t){var r=["home","menu","treinamento"];e.$on("$locationChangeSuccess",function(e,o,t){for(var n in r)if(-1<o.indexOf(r[n]))break})}]),angular.module("dbServer",[]),angular.module("mapsService",[]),angular.module("sessionService",[]),angular.module("timeService",[]),angular.module("menu",[]),angular.module("text",[]),angular.module("initial",[]),angular.module("treinamento",[]),angular.module("home",["ksSwiper","dbServer"]),angular.module("initial").controller("initialController",["$scope","$state","$rootScope","initialService","dialogService",function(e,o,t,n,r){e.init=function(){console.log("%c Que coisa feia inspecionando o app né! ","background: #222; color: #bada55")},e.submit=function(){t.showLoading=!0,n.login(e.login).then(function(e){t.showLoading=!1,o.go("home")}).catch(function(e){t.showLoading=!1;var o={title:"Problemas!",content:e,buttonOk:"Ok"};r.confirm(o)})}}]),angular.module("home").controller("homeController",["$scope","homeService","dialogService","$rootScope","session","$mdDialog","msgsService",function(o,e,t,n,r,a,i){o.init=function(){n.showLoading=!0,o.loadData()},o.loadData=function(){e.getListRotas().then(function(e){n.showLoading=!1,o.malhasRotas=e,console.log("rotasResult",e)}).catch(function(e){console.log("rotasError",e)})}}]),angular.module("menu").controller("menuController",["$scope","$mdSidenav","$log","$state","$rootScope","homeService","session",function(o,t,n,r,e,a,i){o.init=function(){var e=JSON.parse(i.getData("authData"));console.log(e),o.user=e.user},o.close=function(e){t(e).close().then(function(){n.debug("close LEFT is done")}).catch(function(e){console.log(e)})},o.toogleSideNav=function(e){t(e).toggle(),setTimeout(function(){o.$broadcast("reCalcViewDimensions")},1)},o.goto=function(e){"exit"==e&&(sessionStorage.clear(),r.go("initial")),r.go(e),o.close("left")}}]),angular.module("home").service("homeService",["$q","$http","api","session","$timeout",function(t,e,n,o,r){return{getListRotas:function(){var o=t.defer();return n.get("listMaps").then(function(e){o.resolve(e)}).catch(function(e){o.reject(e)}),o.promise},getTreinamentosDoDia:function(){var e=t.defer();return r(function(){e.resolve(treinamentosFake)},100),e.promise}}}]),angular.module("initial").service("initialService",["$q","$http","db","msgsService","auth",function(n,e,o,r,t){return{validaUsuario:function(e){var o=n.defer();if(null!=e||null!=e)o.resolve(e);else{var t={title:"Problemas!",content:r.getMsg("usuario",1),buttonOk:"Ok"};o.reject(t)}return o.promise},login:function(e){var o=n.defer();return t.login(e).then(function(e){o.resolve(e)}).catch(function(e){o.reject(e)}),o.promise}}}]),angular.module("dbServer").service("db",["$q","$http","appUrls","errorRequestService",function(l,u,c,d){return{dbActions:function(e,o,t,n){var r={acao:e,param:o,conexao:t},a=3e4;null==n&&null==n||(a=n);var i={url:c.getUrl("appServicesV1DbServices"),data:r,method:"post",timeout:a},s=l.defer();return u(i).then(function(e){responseData=e.data,null!=responseData?responseData.length<1?s.reject("sem dados"):s.resolve(responseData):s.reject("sem dados")},function(e){console.log("db-error",e),s.reject(d.getMsg(e.status))}),s.promise}}}]),angular.module("rotasAngularJs").service("appUrls",[function(){return{getEnv:function(){return{localhost:"dev"}[window.location.hostname.split(".")[0]]},getUrl:function(e){return{dev:{appAuth:"http://localhost/apiRoutes/auth/login",listMaps:"http://localhost/apiRoutes/listMaps"}}[this.getEnv()][e]}}}]),angular.module("rotasAngularJs").service("dialogService",["$mdDialog","$rootScope","$q",function(n,e,r){return{alert:function(e){n.show(n.alert().clickOutsideToClose(!0).title("Mensagem").textContent(e).ok("Ok"))},confirm:function(e){var o,t=r.defer();return null!=e.buttonCancel?(o=n.confirm()).cancel(e.buttonCancel):o=n.alert(),o.title(e.title).textContent(e.content).ariaLabel(e.label).ok(e.buttonOk),n.show(o).then(function(){t.resolve(!0)},function(){t.reject(!1)}),t.promise},loading:function(e){"hide"!=e?n.show({template:'<div id="loading"><div class="contain-animation"><div class="contain-bear"><img class="prints" src="img/loading/pawprints.svg" alt="Bear Prints" /><span class="cover"></span></div></div></div>',parent:angular.element(document.body),clickOutsideToClose:!1,fullscreen:!1,escapeToClose:!1}):n.hide()},openNewWindow:function(e){window.open(e,"_blank","location=yes,scrollbars=yes,status=yes")}}}]),angular.module("rotasAngularJs").service("errorRequestService",["msgsService",function(o){return{getMsg:function(e){switch(e){case 408:return o.getMsg("app","2");default:return o.getMsg("app","3")}}}}]),angular.module("rotasAngularJs").service("msgsService",[function(){return{getIdioma:function(){var e=sessionStorage.getItem("idioma");return null!=e&&null!=e||(e="portugues"),e},getMsg:function(e,o){return{portugues:{usuario:{1:"Usuário ou senha incorretos, por favor tente novamente!",2:"Usuário já cadastrado!",3:"Usuário removido!"},app:{1:"Dados salvos com sucesso!",2:"Problemas de conexão com a internet. Por favor, tente novamente mais tarde!",3:"Ocorreu um erro inesperado. Por favor, tente novamente ou contate nosso suporte!",4:"Por favor, aguarde...",5:"Dados de sessão corrompidos. Por favor, faça o login novamente!",6:"Preencha todos os campos corretamente!",7:"Tipo de arquivo inválido!",8:"Não foram encontrados dados para os filtros selecionados!",10:"Nenhum dado encontrado!"}},ingles:{usuario:{1:"Incorrect CPF or password, please try again!"},app:{1:"Data saved successfully!",2:"Problems connecting to the internet. Please try again later!",3:"An unexpected error has occurred. Please try again or contact our support!",4:"Please wait...",5:"Session data corrupted. Please, login again!",6:"Complete all the fields correctly!",7:"Invalid file type!",8:"No data was found for the selected filters!",10:"No data found, please try again later!"}},espanhol:{usuario:{1:"CPF o contraseña incorrecta, por favor inténtelo de nuevo!"},app:{1:"Datos guardados con éxito!",2:"Problemas de conexión a Internet. Por favor, inténtelo de nuevo más tarde!",3:"Se ha producido un error inesperado. Por favor, inténtelo de nuevo o contacte nuestro soporte!",4:"Por favor, espere ...",5:"Datos de sesión dañados. Por favor, inicie sesión de nuevo!",6:"Rellena todos los campos correctamente!",7:"Tipo de archivo no válido!",8:"No se han asignado datos a los filtros seleccionados!",10:"Ningún dato encontrado, vuelva a intentarlo más tarde!"}}}[this.getIdioma()][e][o]}}}]),angular.module("mapsService").service("maps",["$q",function(e){return{getCurrentLocation:function(){var o=e.defer(),t={};return navigator.geolocation||(t.error="Navegador não suporta localização!",o.reject(t)),navigator.geolocation.getCurrentPosition(function(e){t.lat=e.coords.latitude,t.lng=e.coords.longitude,o.resolve(t)},function(e){t.error="Problemas na hora de pegar localização!",o.reject(t)}),o.promise}}}]),angular.module("rotasAngularJs").service("session",["msgsService","$state","dialogService",function(o,e,t){return{setData:function(e,o){try{return sessionStorage.setItem(e,btoa(o)),!0}catch(e){throw e}},getData:function(e){try{if(!sessionStorage.getItem(e))throw o.getMsg("app","5");return atob(sessionStorage.getItem(e))}catch(e){throw o.getMsg("app","5")}},valideSession:function(){try{return!!sessionStorage.getItem("userData")||(e.go("initial"),t.alert(o.getMsg("app","5")),!1)}catch(e){o.getMsg("app","5")}},clear:function(){sessionStorage.clear()}}}]),angular.module("timeService").service("time",[function(){return{StringToNumber:function(e){var o=e.split(":"),t=null==o[2]?null:1*o[2];return{horas:1*o[0],minutos:1*o[1],segundos:t}},numberToString:function(e){e.horas=1*e.horas;var o=""+e.horas;o=1==o.length?"0"+o:o,e.minutos=1*e.minutos;var t=""+e.minutos;t=1==t.length?"0"+t:t;var n=null==e.segundos||null==e.segundos?"":e.segundos;return o+":"+t+(n=1<(n=1==(n=""+(n.length<1?"":1*n)).length?"0"+n:n).length?":"+n:"")},formatCalcDatesResult:function(e){var o=parseInt(60*e*60,10),t=Math.floor(o/3600),n=Math.floor((o-3600*t)/60),r=o-3600*t-60*n;return t<10&&(t="0"+t),n<10&&(n="0"+n),r<10&&(r="0"+r),t+":"+n+":"+r},newDateToIe:function(e){var o=(e=e.split("-"))[2].split(" "),t=o[1].split(":");return e[0]=Math.floor((""+e[0]).replace(/[^0-9]/gi,"")),e[1]=Math.floor((""+e[1]).replace(/[^0-9]/gi,""))-1,o[0]=Math.floor((""+o[0]).replace(/[^0-9]/gi,"")),t[0]=Math.floor((""+t[0]).replace(/[^0-9]/gi,"")),t[1]=Math.floor((""+t[1]).replace(/[^0-9]/gi,"")),[e[0],e[1],o[0],t[0],t[1],0]}}}]),angular.module("rotasAngularJs").service("auth",["session","$q","$http","$state","appUrls","msgsService",function(t,n,r,e,a,i){return{login:function(e){var o=n.defer();return r.post(a.getUrl("appAuth"),e).then(function(e){o.resolve(e.data),console.log(e.data),t.setData("authData",JSON.stringify(e.data))}).catch(function(e){"invalid_email_or_password"==e.data[0]&&(e=i.getMsg("usuario",1)),o.reject(e)}),o.promise},logout:function(){t.clear(),e.go("initial")}}}]);